# Chapter12. μ–΄λ…Έν…μ΄μ…κ³Ό λ¦¬ν”λ ‰μ…

## 12μ¥μ—μ„ λ‹¤λ£¨λ” λ‚΄μ©

---

- μ–΄λ…Έν…μ΄μ… μ μ©κ³Ό μ •μ
- λ¦¬ν”λ ‰μ…μ„ μ‚¬μ©ν•΄ μ‹¤ν–‰ μ‹μ μ— κ°μ²΄ λ‚΄λ¶€ κ΄€μ°°ν•κΈ°
- μ½”ν‹€λ¦° μ‹¤μ „ ν”„λ΅μ νΈ μμ 

μ–΄λ…Έν…μ΄μ…κ³Ό λ¦¬ν”λ ‰μ…μ„ μ‚¬μ©ν•λ©΄ κ·Έλ° μ μ•½μ„ λ²—μ–΄λ‚μ„ λ―Έλ¦¬ μ•μ§€ λ»ν•λ” μ„μμ ν΄λμ¤λ¥Ό λ‹¤λ£° μ μλ‹¤. μ–΄λ…Έν…μ΄μ…μ„ μ‚¬μ©ν•λ©΄ λΌμ΄λΈλ¬λ¦¬κ°€ μ”κµ¬ν•λ” μλ―Έλ¥Ό ν΄λμ¤μ— λ¶€μ—¬ν•  μ μκ³  λ¦¬ν”λ ‰μ…μ„ μ‚¬μ©ν•λ©΄ μ‹¤ν–‰ μ‹μ μ— μ»΄νμΌλ¬ λ‚΄λ¶€ κµ¬μ΅°λ¥Ό λ¶„μ„ν•  μ μλ‹¤.

## μ–΄λ…Έν…μ΄μ… μ„ μ–Έκ³Ό μ μ©

---

μ–΄λ…Έν…μ΄μ…μ„ μ‚¬μ©ν•λ©΄ μ„ μ–Έμ— μ¶”κ°€μ μΈ λ©”νƒ€λ°μ΄ν„°λ¥Ό μ—°κ΄€μ‹ν‚¬ μ μλ‹¤. κ·Έ ν›„ μ–΄λ…Έν…μ΄μ…μ΄ μ„¤μ •λ λ°©μ‹μ— λ”°λΌ λ©”νƒ€λ°μ΄ν„°λ¥Ό μ†μ¤μ½”λ“, μ»΄νμΌλ ν΄λμ¤ νμΌ, λ°νƒ€μ„μ— λ€ν•΄ μ‘λ™ν•λ” λ„κµ¬λ¥Ό ν†µν•΄ μ ‘κ·Όν•  μ μλ‹¤.

### μ–΄λ…Έν…μ΄μ… μ μ©ν•΄ μ„ μ–Έμ— ν‘μ§€ λ‚¨κΈ°κΈ°

```kotlin
@Target(CLASS, FUNCTION, PROPERTY, ANNOTATION_CLASS, CONSTRUCTOR, PROPERTY_SETTER, PROPERTY_GETTER, TYPEALIAS)
@MustBeDocumented
public annotation class Deprecated(
    val message: String,
    val replaceWith: ReplaceWith = ReplaceWith(""),
    val level: DeprecationLevel = DeprecationLevel.WARNING
)

@Target()
@Retention(BINARY)
@MustBeDocumented
public annotation class ReplaceWith(val expression: String, vararg val imports: String)
```

- @μ™€ μ–΄λ…Έν…μ΄μ… μ΄λ¦„μ„ μ„ μ–Έ μ•μ— λ„£μΌλ©΄ λλ‹¤.
- μ–΄λ…Έν…μ΄μ… μΈμ
    - κΈ°λ³Έ νƒ€μ…μ κ°’
    - λ¬Έμμ—΄
    - μ΄λ„
    - ν΄λμ¤ μ°Έμ΅°,
    - λ‹¤λ¥Έ μ–΄λ…Έν…μ΄μ… ν΄λμ¤
    - μ„ μ”μ†λ“¤μ λ°°μ—΄ μ”μ†
- μ–΄λ…Έν…μ΄μ… μΈμλ¥Ό μ§€μ •ν•λ” λ¬Έλ²•μ€ μλ°”μ™€ μ•½κ°„ λ‹¤λ¥΄λ‹¤.
    - ν΄λμ¤λ¥Ό μ–΄λ…Έν…μ΄μ… μΈμλ΅ μ§€μ •
        - `::class` λ¥Ό ν΄λμ¤ μ΄λ¦„ λ’¤μ— λ„£μ–΄μ•Ό ν•λ‹¤.
        - `@Anno(MyClass::class)`
    - λ‹¤λ¥Έ μ–΄λ…Έν…μ΄μ…μ„ μΈμλ΅ μ§€μ •
        - μΈμλ΅ λ“¤μ–΄κ°€λ” μ–΄λ…Έν…μ΄μ…μ μ΄λ¦„μ•μ— `@`λ¥Ό λ„£μ§€ μ•λ”λ‹¤.
        - `ReplaceWith` μ²λΌ
    - λ°°μ—΄μ„ μΈμλ΅ μ§€μ •
        - κ°κ΄„νΈ `[]` λ¥Ό μ‚¬μ©ν•λ‹¤.
        - `arrayOf` ν•¨μ μ‚¬μ© κ°€λ¥
- μ–΄λ…Έν…μ΄μ… μΈμλ¥Ό μ»΄νμΌ μ‹μ μ— μ• μ μμ–΄μ•Ό ν•λ―€λ΅ μ„μμ ν”„λ΅νΌν‹°λ¥Ό μΈμλ΅ μ§€μ •ν•  μλ” μ—†λ‹¤.
    - ν”„λ΅νΌν‹°λ¥Ό μ–΄λ…Έν…μ΄μ… μΈμλ΅ μ‚¬μ©ν•λ ¤λ©΄ κ·Έ μ•μ— `const` λ³€κ²½μλ¥Ό λ¶™μ—¬μ•Ό ν•λ‹¤.
    - μ»΄νμΌλ¬λ” `const`κ°€ λ¶™μ€ ν”„λ΅νΌν‹°λ¥Ό μ»΄νμΌ μ‹μ  μƒμλ΅ μ·¨κΈ‰ν•λ‹¤.
    - `const`κ°€ λ¶™μ€ ν”„λ΅νΌν‹°λ¥Ό νμΌμ μµμƒμ„λ‚ `object` μ•μ— μ„ μ–Έν•΄μ•Ό ν•λ©° κΈ°λ³Έ νƒ€μ…μ΄λ‚ `String`μΌλ΅ μ΄κΈ°ν™”ν•΄μ•Όλ§ ν•λ‹¤.

### μ–΄λ…Έν…μ΄μ… νƒ€κΉƒ: μ–΄λ…Έν…μ΄μ…μ΄ μ°Έμ΅°ν•  μ μλ” μ •ν™•ν• μ„ μ–Έ μ§€μ •

- μ½”ν‹€λ¦° μ†μ¤μ½”λ“μ—μ„ ν• μ„ μ–Έμ„ μ»΄νμΌν• κ²°κ³Όκ°€ μ—¬λ¬ μλ°” μ„ μ–Έκ³Ό λ€μ‘ν•λ” κ²½μ°κ°€ μμ£Ό μμ–΄ μ–΄λ…Έν…μ΄μ…μ„ λ¶™μΌ λ• μ–΄λ μ”μ†μ— μ–΄λ…Έν…μ΄μ…μ„ λ¶™μΌμ§€ ν‘μ‹ν•  ν•„μ”κ°€ μλ‹¤.
    - λ”°λΌμ„ μ—¬λ¬ μλ°” μ„ μ–Έμ— κ°κ° μ–΄λ…Έν…μ΄μ…μ„ λ¶™μ—¬μ•Ό ν•  λ–„κ°€ μλ‹¤.
    - eg) μ½”ν‹€λ¦° ν”„λ΅νΌν‹° == μλ°” ν•„λ“ κ²ν„°, + μ„Έν„° λ©”μ„λ“ λ° κ·Έ νλΌλ―Έν„° μ„ μ–Έκ³Ό λ€μ‘
- `μ‚¬μ© μ§€μ  νƒ€κΉƒ(use-site target)` μ„ μ–Έμ„ ν†µν•΄ μ–΄λ…Έν…μ΄μ…μ„ λ¶™μΌ μ”μ†λ¥Ό μ •ν•  μ μλ‹¤.

```kotlin
@get:JvmName("obtainCertificate")
```

- μ‚¬μ© μ§€μ  νƒ€κΉƒμ€ @κΈ°νΈμ™€ μ–΄λ…Έν…μ΄μ… μ΄λ¦„ μ‚¬μ΄μ— λ¶™μΌλ©° μ–΄λ…Έν…μ΄μ… μ΄λ¦„κ³Όλ” μ½λ΅ μΌλ΅ λ¶„λ¦¬λλ‹¤.
    - `get`: JvmName μ–΄λ…Έν…μ΄μ…μ„ ν”„λ΅νΌν‹° κ²ν„°μ— μ μ©ν•λΌλ” λ»
- μλ°”μ— μ„ μ–Έλ μ–΄λ…Έν…μ΄μ…μ„ μ‚¬μ©ν•΄ ν”„λ΅νΌν‹°μ— μ–΄λ…Έν…μ΄μ…μ„ λ¶™μ΄λ” κ²½μ° κΈ°λ³Έμ μΌλ΅ ν”„λ΅νΌν‹°μ ν•„λ“μ— κ·Έ μ–΄λ…Έν…μ΄μ…μ΄ λ¶™λ”λ‹¤.
    - ν•μ§€λ§ μ½”ν‹€λ¦°μΌλ΅ μ–΄λ…Έν…μ΄μ…μ„ μ„ μ–Έν•λ©΄ ν”„λ΅νΌν‹°μ— μ§μ ‘ μ μ©ν•  μ μλ” μ–΄λ…Έν…μ΄μ…μ„ λ§λ“¤ μ μλ‹¤.
- μ‚¬μ© μ§€μ  νƒ€κΉƒ μ§€μ› νƒ€κΉƒ λ©λ΅
    - property: ν”„λ΅νΌν‹° μ „μ²΄
        - μλ°”μ—μ„ μ„ μ–Έλ μ–΄λ…Έν…μ΄μ…μ€ ν•΄λ‹Ή μ‚¬μ© μ§€μ  νƒ€κΉƒ μ§€μ • λ¶κ°€λ¥
    - field: ν”„λ΅νΌν‹°μ— μν•΄ μƒμ„±λλ” ν•„λ“
    - get: ν”„λ΅νΌν‹° κ²ν„°
    - set: ν”„λ΅νΌν‹° μ„Έν„°
    - receiver: ν™•μ¥ ν•¨μλ‚ ν”„λ΅νΌν‹°μ μμ‹  κ°μ²΄ νλΌλ―Έν„°
    - param: μƒμ„±μ νλΌλ―Έν„°
    - setparam: μ„Έν„° νλΌλ―Έν„°
    - delegate: μ„μ„ ν”„λ΅νΌν‹°μ μ„μ„ μΈμ¤ν„΄μ¤λ¥Ό λ‹΄μ•„λ‘” ν•„λ“
    - file: νμΌ μ•μ— μ„ μ–Έλ  μµμƒμ„ ν•¨μμ™€ ν”„λ΅νΌν‹°λ¥Ό λ‹΄μ•„λ‘λ” ν΄λμ¤
- file λ€μƒμ„ μ‚¬μ©ν•λ” μ–΄λ…Έν…μ΄μ…μ€ νμΌμ—μ„ package μ„ μ–Έλ³΄λ‹¤ λ” μ•μ—λ§ λ„£μ„ μ μλ‹¤.
    - νμΌμ— ν”ν μ μ©ν•λ” μ–΄λ…Έν…μ΄μ…μΌλ΅λ” νμΌμ— μλ” μµμƒμ„ μ„ μ–Έμ„ λ‹΄λ” ν΄λμ¤μ μ΄λ¦„μ„ λ°”κΏ”μ£Όλ” @JvmName μ΄ μλ‹¤.
- ν΄λμ¤ λλ” ν•¨μμ„ μ–Έμ΄λ‚ νƒ€μ…λ§ μ‚¬μ©ν•  μ μλ” μλ°”μ™€ λ‹¬λ¦¬ μ½”ν‹€λ¦°μ—μ„λ” μ–΄λ…Έν…μ΄μ… μΈμλ΅ ν΄λμ¤ λλ” ν•¨μ μ„ μ–Έμ΄λ‚ νƒ€μ… μ™Έμ— μ„μμ μ‹μ„ ν—μ©ν•λ‹¤.

μλ°” APIλ¥Ό μ–΄λ…Έν…μ΄μ…μΌλ΅ μ μ–΄ν•κΈ°

<aside>
π’΅

μ½”ν‹€λ¦°μ€ μ½”ν‹€λ¦°μΌλ΅ μ„ μ–Έν• λ‚΄μ©μ„ μλ°” λ°”μ΄νΈμ½”λ“λ΅ μ»΄νμΌν•λ” λ°©λ²•κ³Ό μ½”ν‹€λ¦° μ„ μ–Έμ„ μλ°”μ— λ…Έμ¶ν•λ” λ°©λ²•μ„ μ μ–΄ν•κΈ° μ„ν• μ–΄λ…Έν…μ΄μ…μ„ λ§μ΄ μ κ³µν•λ‹¤.

</aside>

- @JvmName: μ½”ν‹€λ¦° μ„ μ–Έμ΄ λ§λ“¤μ–΄λ‚΄λ” μλ°” ν•„λ“λ‚ λ©”μ„λ“ μ΄λ¦„μ„ λ³€κ²½ν•λ‹¤.
- @JvmStatic: κ°μ²΄ μ„ μ–Έμ΄λ‚ λ™λ° κ°μ²΄μ λ©”μ„λ“μ— μ μ©ν•λ©΄ λ©”μ„λ“κ°€ μλ°” μ •μ  λ©”μ„λ“λ΅ λ…Έμ¶λλ‹¤.
- @JvmOverloads: λ””ν΄νΈ νλΌλ―Έν„° κ°’μ΄ μλ” ν•¨μμ— λ€ν•΄ μ»΄νμΌλ¬κ°€ μλ™μΌλ΅ μ¤λ²„λ΅λ”©ν• ν•¨μλ¥Ό μƒμ„±ν•΄μ¤€λ‹¤.
    - 3.2.3 μ 
- @JvmField: ν”„λ΅νΌν‹°μ— μ‚¬μ”ν•λ©΄ μλ°” λ μ½”λ“ ν΄λμ¤λ¥Ό μ„ μ–Έν•  μ μλ‹¤.
    - 4.3.2 μ 
- @JvmRecord: data classμ— μ‚¬μ©ν•λ©΄ μλ°” λ μ½”λ“ ν΄λμ¤λ¥Ό μ„ μ–Έν•  μ μλ‹¤.
    - 4.3.2 μ 

### μ–΄λ…Έν…μ΄μ…μ„ ν™μ©ν•΄ JSON μ§λ ¬ν™” μ μ–΄

```kotlin
data class Person(val name: String, val age: Int)
// Person("Alice", 29) -> μ§λ ¬ν™” {"name": "Alice", "age": 29}
// Person("Alice", 29) <- μ—­μ§λ ¬ν™” {"name": "Alice", "age": 29}
```

- μ½”ν‹€λ¦° κ°μ²΄ jsonμΌλ΅ μ§λ ¬ν™” ν•μ‹μΌλ΅ λ³€ν™ν•κΈ° μ„ν• μ½”ν‹€λ¦° λΌμ΄λΈλ¬λ¦¬, μλ°” κ°μ²΄λ¥Ό μ„ν• λΌμ΄λΈλ¬λ¦¬λ„ μ™„μ „ν νΈν™λλ‹¤.
    - μ ―λΈλ μΈ kotlinx.serialization
    - jackson
    - gson
- **μ μ΄ν‚¤λ“λ΅ μμ  λ° μ‹¤μµ**
    - μ–΄λ…Έν…μ΄μ…μ„ ν™μ©ν•΄ κ°μ²΄λ¥Ό μ§λ ¬ν™”ν•κ±°λ‚ μ—­μ§λ ¬ν™”ν•λ” λ°©λ²•μ„ μ μ–΄ν•  μ μλ‹¤.
    - κ°μ²΄λ¥Ό JSONμΌλ΅ μ§λ ¬ν™”ν•  λ• μ μ΄ν‚¤λ“ λΌμ΄λΈλ¬λ¦¬λ” κΈ°λ³Έμ μΌλ΅ λ¨λ“  ν”„λ΅νΌν‹°λ¥Ό μ§λ ¬ν™”ν•λ©° ν”„λ΅νΌν‹° μ΄λ¦„μ„ ν‚¤λ΅ μ‚¬μ©ν•λ‹¤.
        - μ–΄λ…Έν…μ΄μ…μ„ ν†µν•΄ λ³€κ²½ν•  μ μλ‹¤.
        - @JsonExclude, @JsonName

### μ–΄λ…Έν…μ΄μ… μ„ μ–Έ

```kotlin
annotation class JsonExclude
annotation class JsonName(val name: String)
```

- μ μ΄ν‚¤λ“μ μ–΄λ…Έν…μ΄μ…μ„ μμ λ΅ μ–΄λ…Έν…μ΄μ…μ„ μ„ μ–Έν•λ” λ°©λ²•μ„ μ‚΄ν΄λ³΄μ.
- μ–΄λ…Έν…μ΄μ… ν΄λμ¤λ” μ„ μ–Έμ΄λ‚ μ‹κ³Ό κ΄€λ ¨ μλ” λ©”νƒ€λ°μ΄ν„°μ κµ¬μ΅°λ§ μ •μν•κΈ° λ•λ¬Έμ— λ‚΄λ¶€μ— μ•„λ¬΄ μ½”λ“λ„ λ“¤μ–΄μμ„ μ μ—†λ‹¤.
- νλΌλ―Έν„°κ°€ μλ” μ–΄λ…Έν…μ΄μ…μ„ μ •μν•λ ¤λ©΄ μ£Ό μƒμ„±μμ— νλΌλ―Έν„°λ¥Ό μ„ μ–Έν•΄μ•Ό ν•λ‹¤.
    - λ°λ“μ‹ valλ΅ μ„ μ–Έν•΄μ•Ό ν•λ‹¤.

### λ©”νƒ€μ–΄λ…Έν…μ΄μ…: μ–΄λ…Έν…μ΄μ…μ„ μ²λ¦¬ν•λ” λ°©λ²• μ μ–΄

```kotlin
@Target(AnnotationTarget.PROPERTY)
annotation class JsonExclude
```

- μλ°”μ™€ λ§μ°¬κ°€μ§€λ΅ μ½”ν‹€λ¦° μ–΄λ…Έν…μ΄μ… ν΄λμ¤μ—λ„ μ–΄λ…Έν…μ΄μ…μ„ λ¶™μΌ μ μλ‹¤.
- λ©”νƒ€μ–΄λ…Έν…μ΄μ…: μ–΄λ…Έν…μ΄μ… ν΄λμ¤μ— μ μ©ν•  μ μλ” μ–΄λ…Έν…μ΄μ…
    - eg) @Target
- Target λ©”νƒ€μ–΄λ…Έν…μ΄μ…μ€ μ–΄λ…Έν…μ΄μ…μ„ μ μ©ν•  μ μλ” μ”μ†μ μ ν•μ„ μ§€μ •ν•λ‹¤.
    - Targetμ„ μ§€μ •ν•μ§€ μ•μΌλ©΄ λ¨λ“  μ„ μ–Έμ— μ μ©ν•  μ μλ‹¤.
- λ©”νƒ€μ–΄λ…Έν…μ΄μ…μ„ λ§λ“¤μ–΄μ•Ό ν•λ‹¤λ©΄ ANOOTATION_CLASSλ¥Ό νƒ€κΉƒμΌλ΅ μ§€μ •ν•μ.

### μ–΄λ…Έν…μ΄μ… νλΌλ―Έν„°λ΅ ν΄λμ¤ μ‚¬μ©

```kotlin
interface Company {
	val name: String
}

data class CompanyImpl(override val name: String) : Company

data class Person(
	val name: String,
	@DeserializeInterface(CompnayImpl::class) val company: Company
)
```

```kotlin
annotation class DeserializeInterface(val targetClass: KClass<out Any>)
```

- μ–΄λ–¤ ν΄λμ¤λ¥Ό μ„ μ–Έ λ©”νƒ€λ°μ΄ν„°λ΅ μ°Έμ΅°ν•  μ μλ” κΈ°λ¥μ΄ ν•„μ”ν• κ²½μ°, ν΄λμ¤ μ°Έμ΅°λ¥Ό νλΌλ―Έν„°λ΅ ν•λ” μ–΄λ…Έν…μ΄μ… ν΄λμ¤λ¥Ό μ„ μ–Έν•λ©΄ κ·Έλ° κΈ°λ¥μ„ μ‚¬μ©ν•  μ μλ‹¤.
- μ μ΄ν‚¤λ“ `@DeserializeInterface` λ” μΈν„°νμ΄μ¤ νƒ€μ…μΈ ν”„λ΅νΌν‹°μ— λ€ν• μ—­μ§λ ¬ν™”λ¥Ό μ μ–΄ν•  λ• μ“°λ” μ–΄λ…Έν…μ΄μ…μ΄λ‹¤.
- λ”°λΌμ„ μ—­μ§λ ¬ν™” μ‹ μ–΄λ–¤ ν΄λμ¤λ¥Ό μ‚¬μ©ν•΄ μΈν„°νμ΄μ¤λ¥Ό κµ¬ν„ν• μ§€λ¥Ό μ§€μ •ν•  μ μμ–΄μ•Ό ν•λ‹¤.
- KClass νƒ€μ…μ€ μ½”ν‹€λ¦° ν΄λμ¤μ— λ€ν• μ°Έμ΅°λ¥Ό μ €μ¥ν•λ‹¤.
- KClass νƒ€μ… νλΌλ―Έν„°λ”  KClassμ μΈμ¤ν„΄μ¤κ°€ κ°€λ¦¬ν‚¤λ” μ½”ν‹€λ¦° νƒ€μ…μ„ μ§€μ •ν•λ‹¤.
    - μμ‹μ—μ„μ KClass<CompanyImpl>λ” KClass<out Any>μ ν•μ„νƒ€μ…μ΄λ‹¤.
    - KClass<out Any> β† Kclass<CompanyImpl>
- out λ³€κ²½μ μ—†μ΄ KClass<Any>λΌκ³  μ‚¬μ©ν•λ©΄ Any::class λ§ λ„κΈΈ μ μλ‹¤.

### μ–΄λ…Έν…μ΄μ… νλΌλ―Έν„°λ΅ μ λ„¤λ¦­ ν΄λμ¤ λ°›κΈ°

```kotlin
interface ValueSerializer<T> {
	fun toJsonValue(value: T): Any?
	fun formJsonValue(jsonValue: Any?): T
}
```

```kotlin
annotation class CustomSerializer(
	val serializerClass: KClass<out ValueSerializer<*>>
)
```

```kotlin
      // ---------------------  DateSerializer::classλ” ν—μ©μ΄μ§€λ§ Date::Classλ” κ±°λ¶€ν•λ‹¤
KClass<out ValueSerializer<*>>
    // -- ValueSerializerλ¥Ό κµ¬ν„ν•λ” λ¨λ“  ν΄λμ¤λ¥Ό λ°›μ•„ λ“¤μΈλ‹¤.
                         // ValueSerializerλ¥Ό μ‚¬μ©ν•΄ μ–΄λ–¤ νƒ€μ…μ κ°’μ΄λ“  μ§λ ¬ν™”ν•  μ μκ² ν—μ©ν•λ‹¤.
```

- ValueSerializer ν΄λμ¤λ” μ λ„¤λ¦­ ν΄λμ¤μ΄λ―€λ΅ νƒ€μ… νλΌλ―Έν„°κ°€ μ΅΄μ¬ν•λ‹¤.
- λ”°λΌμ„ ValueSerializer νƒ€μ…μ„ μ°Έμ΅°ν•λ ¤λ©΄ ν•­μƒ νƒ€μ… μΈμλ¥Ό μ κ³µν•΄μ•Ό ν•λ‹¤.
- ν•μ§€λ§ μ΄ μ–΄λ…Έν…μ΄μ…μ΄ μ–΄λ–¤ νƒ€μ…μ— λ€ν•΄ μ“°μΌμ§€ μ „ν€ μ• μ μ—†μΌλ―€λ΅ μ—¬κΈ°μ„λ” μ¤νƒ€ ν”„λ΅μ μ…μ„ μΈμλ΅ μ‚¬μ©ν•  μ μλ‹¤.
- ν΄λμ¤λ¥Ό μ–΄λ…Έν…μ΄μ… μΈμλ΅ λ°›μ•„μ•Ό ν•  λ• ν¨ν„΄
    - `KClass<out μμ‹ μ ν΄λμ¤ μ΄λ¦„>`
    - `μμ‹ μ ν΄λμ¤ μ΄λ¦„` μμ²΄κ°€ νƒ€μ… μΈμλ¥Ό λ°›μ•„μ•Ό ν•λ‹¤λ©΄
        - `KClass<out μμ‹ μ ν΄λμ¤ μ΄λ¦„<*>>`  νƒ€μ…μΈμλ¥Ό *λ΅ λ°”κΎΌλ‹¤.

## λ¦¬ν”λ ‰μ…: μ‹¤ν–‰ μ‹μ μ— μ½”ν‹€λ¦° κ°μ²΄ λ‚΄λ¶€ κ΄€μ°°

---

- λ¦¬ν”λ ‰μ…
    - μ‹¤ν–‰ μ‹μ μ— λ™μ μΌλ΅ κ°μ²΄μ ν”„λ΅νΌν‹°μ™€ λ©”μ„λ“μ— μ ‘κ·Όν•  μ μκ² ν•΄μ£Όλ” λ°©λ²•
        - λ³΄ν†µμ€ μ†μ¤μ½”λ“μ•μ— κµ¬μ²΄μ μΈ μ„ μ–Έμ΄ μλ” λ©”μ„λ“λ‚ ν”„λ΅νΌν‹° μ΄λ¦„μ„ μ‚¬μ©, μ»΄νμΌλ¬λ” κ·Έλ° μ΄λ¦„μ΄ μ‹¤μ λ΅ κ°€λ¦¬ν‚¤λ” μ„ μ–Έμ„ μ •μ (μ»΄νμΌ μ‹μ )μΌλ΅ μ°Ύμ•„λ‚΄ ν•΄λ‹Ήν•λ” μ„ μ–Έμ΄ μ‹¤μ  μ΅΄μ¬ν•¨μ„ λ³΄μ¥ν•λ‹¤.
    - ν•μ§€λ§ νƒ€μ…κ³Ό κ΄€κ³„μ—†μ΄ κ°μ²΄λ¥Ό λ‹¤λ¤„μ•Ό ν•κ±°λ‚ κ°μ²΄κ°€ μ κ³µν•λ” λ©”μ„λ“λ‚ ν”„λ΅νΌν‹° μ΄λ¦„μ„ μ¤μ§ μ‹¤ν–‰ μ‹μ μ—λ§ μ• μ μλ” κ²½μ°κ°€ μλ‹¤.
        - μ§λ ¬ν™” λΌμ΄λΈλ¬λ¦¬
        - μ–΄λ–¤ κ°μ²΄λ“  jsonμΌλ΅ λ³€ν™ν•  μ μμ–΄μ•Ό ν•κΈ° λ•λ¬Έμ— νΉμ • ν΄λμ¤λ‚ ν”„λ΅νΌν‹°λ§ μ°Έμ΅°ν•  μ μ—†λ‹¤.
        - λ¦¬ν”λ ‰μ… μ‚¬μ©
- μ½”ν‹€λ¦°μ—μ„ λ¦¬ν”λ ‰μ…μ„ μ‚¬μ©ν•λ ¤λ©΄ λ³΄ν†µμ€ μ½”ν‹€λ¦° λ¦¬ν”λ ‰μ… API
    - kotlin.reflect, kotlin.reflect.full
    - jvm μ–Έμ–΄μ—μ„ μƒμ„±ν• λ°”μ΄νΈ μ½”λ“λ¥Ό μ¶©λ¶„ν λ‹¤λ£° μ μλ‹¤.
    - λ³„λ„μ kotlin-reflect.jar λ΅ μ κ³µλλ‹¤
        - `org.jetbrains.kotlin:kotlin-reflect`
- μ°¨μ„ μΌλ΅ μλ°” ν‘μ¤€ λ¦¬ν”λ ‰μ…
    - java.lang.reflect

### μ½”ν‹€λ¦° λ¦¬ν”λ ‰μ… API: KClass, KCallabe, KFunction, KProperty

```kotlin
import kotlin.reflect.full.memberProperties

class Person(val name: String, val age: Int)

fun main() {
    val person = Person("Alice", 29)
    val kClass = person::class
    println(kClass.simpleName)
    // Person
    kClass.memberProperties.forEach { println(it.name) }
    // age
    // name
}
```

- `KClass`
    - ν΄λμ¤λ¥Ό ν‘ν„
    - μ‚¬μ©ν•λ©΄ ν΄λμ¤ μ•μ— μλ” λ¨λ“  μ„ μ–Έμ„ μ—΄κ±°ν•κ³  κ° μ„ μ–Έμ— μ ‘κ·Όν•κ±°λ‚ ν΄λμ¤μ μƒμ„ ν΄λμ¤λ¥Ό μ–»λ” λ“±μ μ‘μ—…μ΄ κ°€λ¥ν•λ‹¤.
    - `MyClass::class` μ‹μ„ μ‚¬μ©ν•λ©΄ μΈμ¤ν„΄μ¤λ¥Ό μ–»μ„ μ μλ‹¤.
        - κ°μ²΄μ ν΄λμ¤λ¥Ό μ‹¤ν–‰ μ‹μ μ— μ–»μΌλ ¤λ©΄ λ§μ°¬κ°€μ§€λ΅ `myObject::class`
    - `memberProperties` λ¥Ό ν†µν•΄ ν΄λμ¤μ™€ λ¨λ“  μ΅°μƒ ν΄λμ¤ λ‚΄λ¶€μ— μ •μλ λΉ„ν™•μ¥ ν”„λ΅νΌν‹°λ¥Ό λ¨λ‘ κ°€μ Έμ¨λ‹¤.
        - KClass μ„ μ–Έμ„ μ°Ύμ•„λ³΄λ©΄ ν΄λμ¤μ λ‚΄λ¶€λ¥Ό μ‚΄ν΄λ³Ό λ• μ‚¬μ©ν•  μ μλ” μ μ©ν• λ©”μ„λ“λ¥Ό λ³Ό μ μλ‹¤.

```kotlin
interface interface KCallable<out R> {
	fun call(vararg args: Any?): R
	//...
}
```

```kotlin
import kotlin.reflect.KFunction1

fun foo(x: Int) = println(x)

fun main() {
    val kFunction: KFunction1<Int, Unit> = ::foo // fooμ— λ€ν• KFunction1<Int, Unit> μ°Έμ΅° μ–»λ”λ‹¤.
    kFunction.call(42) // 42λ¥Ό μΈμλ΅ ν•¨μλ¥Ό νΈμ¶ν•λ‹¤.
    // 42
}
```

- `KCallable`
    - ν•¨μμ™€ ν”„λ΅νΌν‹°λ¥Ό μ•„μ°λ¥΄λ” κ³µν†µ μƒμ„ μΈν„°νμ΄μ¤
    - call λ©”μ„λ“κ°€ μλ‹¤.
- callμ„ μ‚¬μ©ν•λ©΄ ν•¨μλ‚ ν”„λ΅νΌν‹°μ κ²ν„°λ¥Ό νΈμ¶ν•  μ μλ‹¤.
    - μ‚¬μ©ν•  λ•λ” ν•¨μ μΈμλ¥Ό vararg λ¦¬μ¤νΈλ΅ μ „λ‹¬ν•λ‹¤.
    - ν•¨μ μΈμ κ°μμ™€ μ›λ ν•¨μμ— μ •μλ νλΌλ―Έν„° κ°μκ°€ λ§μ•„μ•Ό ν•λ‹¤.
- `::foo`
    - 5.1.5μ μ—μ„ μ„¤λ…
    - μ‹μ κ°’ νƒ€μ…μ΄ λ¦¬ν”λ ‰μ… APIμ— μλ” KFunction ν΄λμ¤μ μΈμ¤ν„΄μ¤μ„μ„ μ• μ μλ‹¤.
- KFunction1 μΈν„°νμ΄μ¤λ¥Ό ν†µν•΄ ν•¨μλ¥Ό νΈμ¶ν•λ ¤λ©΄ invoke λ©”μ„λ“λ¥Ό μ‚¬μ©ν•΄μ•Ό ν•λ‹¤.
    - KFunction1λ¥Ό μ§μ ‘ νΈμ¶ν•  μλ„ μλ‹¤. 13.3μ 
    - callμ΄ μ•„λ‹λΌ invoke λ©”μ„λ“λ¥Ό νΈμ¶ν•  λ•λ” μ»΄νμΌμ΄ μ•λκΈ° λ•λ¬Έμ— μΈμ κ°μλ‚ νƒ€μ…μ„ μ‹¤μλ΅ ν‹€λ¦΄ μ μ—†λ‹¤.
    - ν•΄λ‹Ή μΈν„°νμ΄μ¤λ“¤μ€ μ»΄νμΌλ¬κ°€ μƒμ„±ν• ν•©μ„± νƒ€μ…

```kotlin
import kotlin.reflect.KMutableProperty0

var counter = 0

fun main() {
    val kProperty: KMutableProperty0<Int> = ::counter
    kProperty.setter.call(21) // λ¦¬ν”λ ‰μ… κΈ°λ¥μ„ ν†µν•΄ μ„Έν„°λ¥Ό νΈμ¶ν•λ©΄μ„ 21μ„ μΈμλ΅ λ„κΈ΄λ‹¤.
    println(kProperty.get())
    // 21
}
```

- `KProperty`
    - callμ€ ν”„λ΅νΌν‹°μ κ²ν„°λ¥Ό νΈμ¶ν•λ‹¤.
    - λ¨λ“  ν”„λ΅νΌν‹° ν‘ν„
- `KMutableProperty`
    - varλ΅ μ •μν• ν”„λ΅νΌν‹° ν‘ν„
- ν•μ§€λ§ ν”„λ΅νΌν‹° μΈν„°νμ΄μ¤λ” ν”„λ΅νΌν‹° κ°’μ„ μ–»λ” λ” μΆ‹μ€ λ°©λ²•μΌλ΅ get λ©”μ„λ“λ¥Ό μ κ³µν•λ‹¤.
    - get λ©”μ„λ“μ— μ ‘κ·Όν•λ ¤λ©΄ ν”„λ΅νΌν‹°κ°€ μ„ μ–Έλ λ°©λ²•μ— λ”°λΌ μ¬λ°”λ¥Έ μΈν„°νμ΄μ¤λ¥Ό μ‚¬μ©ν•΄μ•Ό ν•λ‹¤.
- μµμƒμ„ μ½κΈ° μ „μ©κ³Ό κ°€λ³€ ν”„λ΅νΌν‹°λ” κ°κ° `KProperty0`μ΄λ‚ `KMutableProperty0` μΈν„°νμ΄μ¤μ μΈμ¤ν„΄μ¤λ΅ ν‘ν„λλ‹¤.
    - λ‘ λ‹¤ μΈμκ°€ μ—†λ” get λ©”μ„λ“λ¥Ό μ κ³µν•λ‹¤.

```kotlin
import kotlin.reflect.KProperty1

class Person(val name: String, val age: Int)

fun main() {
    val person = Person("Alice", 29)
    val memberProperty: KProperty1<Person, Int> = Person::age
    println(memberProperty.get(person))
    // 29
}
```

- λ©¤λ²„ ν”„λ΅νΌν‹°λ” `KProperty1`μ΄λ‚ `KMutableProperty1` μΈμ¤ν„΄μ¤λ΅ ν‘ν„λλ‹¤.
    - κ·Έ μ•μ—λ” μΈμκ°€ 1κ°μΈ get λ©”μ„λ“κ°€ μλ‹¤.
    - get λ©”μ„λ“λ¥Ό ν†µν•΄ ν”„λ΅νΌν‹° κ°’μ„ μ–»μΌλ ¤λ©΄ κ°’μ„ μ–»μ„ μμ‹  κ°μ²΄ μΈμ¤ν„΄μ¤λ¥Ό λ„κ²¨μ•Ό ν•λ‹¤.
- 5.1.6μ μ—μ„ μ‚΄ν΄λ΄„
- `KProperty1` μ€ μ λ„¤λ¦­ ν΄λμ¤λΌλ” μ μ— μ μν•μ.
    - μ²«λ²μ§Έ νλΌλ―Έν„°λ” μμ‹  κ°μ²΄ νƒ€μ…
    - λ‘λ²μ§Έ νλΌλ―Έν„°λ” ν”„λ΅νΌν‹° νƒ€μ… ν‘ν„
- μμ‹  κ°μ²΄λ¥Ό λ„κΈΈ λ•λ” `KProperty1` νƒ€μ…μ— μΌμΉν•λ” νƒ€μ…μ κ°μ²΄λ§μ„ λ„κΈΈ μ μλ‹¤.
- μµμƒμ„ μμ¤€μ΄λ‚ ν΄λμ¤ μ•μ— μ •μλ ν”„λ΅νΌν‹°λ§ λ¦¬ν”λ ‰μ…μΌλ΅ μ ‘κ·Όν•  μ μκ³  ν•¨μμ λ΅μ»¬ λ³€μμ—λ” μ ‘κ·Όν•  μ μ—†λ‹¤λ” μ μ„ μ μν•μ.
    - λ³€μμ— λ€ν• μ°Έμ΅°λ” μ•„μ§ μ§€μ›ν•μ§€ μ•μ

![image.png](image/image1.png)

### **λ¦¬ν”λ ‰μ…μ„ μ‚¬μ©ν•΄ κ°μ²΄ μ§λ ¬ν™” κµ¬ν„**

- μ§λ ¬ν™” ν•¨μλ” κΈ°λ³Έμ μΌλ΅ κ°μ²΄μ λ¨λ“  ν”„λ΅νΌν‹°λ¥Ό μ§λ ¬ν™”ν•λ‹¤.
- μ›μ‹ νƒ€μ…μ΄λ‚ λ¬Έμμ—΄μ€ μ μ νΒ `JSON μ`,Β `λ¶λ¦¬μ–Έ`,Β `λ¬Έμμ—΄ κ°’`Β λ“±μΌλ΅ λ³€ν™λλ‹¤.
- μ»¬λ ‰μ…μ€ JSON λ°°μ—΄λ΅ μ§λ ¬ν™”λλ‹¤.
- μ›μ‹ νƒ€μ…μ΄λ‚ λ¬Έμμ—΄, μ»¬λ ‰μ…μ΄ μ•„λ‹ λ‹¤λ¥Έ νƒ€μ…μΈ ν”„λ΅νΌν‹°λ” λ‚΄ν¬λ JSON κ°μ²΄λ΅ μ§λ ¬ν™”λλ‹¤.

```kotlin
private fun StringBuilder.serializeObject(obj: Any) {
    val kClass = obj::class as KClass<Any>
    val properties = kClass.memberProperties

    properties.joinToStringBuilder(
        this, prefix = "{", postfix = "}") { prop ->
        serializeString(prop.name) // ν”„λ΅νΌν‹° μ΄λ¦„
        append(": ")
        serializePropertyValue(prop.get(obj)) // ν”„λ΅νΌν‹° κ°’
    }
```

- ν΄λμ¤μ— μ •μλ λ¨λ“  ν”„λ΅νΌν‹°λ¥Ό μ—΄κ±°ν•κΈ° λ•λ¬Έμ— κ° ν”„λ΅νΌν‹°κ°€ μ–΄λ–¤ νƒ€μ…μΈμ§€ μ• μ μ—†λ‹¤.
    - propμ νƒ€μ…μ€ `KProperty1<Any, *>`
    - prop.get(obj) λ©”μ„λ“ νΈμ¶μ€ Any? νƒ€μ…μ κ°’μ„ λ°ν™
- ν•μ§€λ§ getμ— λ„κΈ°λ” κ°μ²΄κ°€ ν”„λ΅νΌν‹°λ¥Ό μ–»μ–΄μ¨ κ°μ²΄μ΄κΈ° λ•λ¬Έμ— ν•­μƒ ν”„λ΅νΌν‹° κ°’μ΄ μ λ€λ΅ λ°ν™λλ‹¤.

### **μ–΄λ…Έν…μ΄μ…μ„ ν™μ©ν•΄ μ§λ ¬ν™” μ μ–΄**

`@JsonExclude`,Β `@JsonName`,Β `@CustomSerializer`Β κ°€Β `serializeObject` ν•¨μκ°€ μ–΄λ–»κ² μ²λ¦¬ν•λ”μ§€ μ‚΄ν΄λ³΄μ

```kotlin
val properties = kClass.memberProperties.filter { it.findAnnotation<JsonExclude>() == null }
```

- `@JsonExclude`Β μ–΄λ…Έν…μ΄μ…μ΄ λ¶™μ€ ν”„λ΅νΌν‹°λ” μ§λ ¬ν™”μ—μ„ μ μ™Έν•΄μ•Ό ν•λ‹¤.
- KAnnotatedElementμ— λ€ν•΄ νΈμ¶ν•  μ μλ” findAnnotation μ‚¬μ©

```kotlin
annotation class JsonName(val name: String)

data class Person(
    @JsonName("alias") val firstName: String,
    val age: Int
)

val jsonNameAnn = prop.findAnnotation<JsonName>()
val propName = jsonNameAnn?.name ?: prop.name
```

- `@JsonName`Β μ–΄λ…Έν…μ΄μ…μ΄ λ¶™μ€ ν”„λ΅νΌν‹°λ” μ΄λ¦„μ„ λ³€κ²½ν•΄μ•Ό ν•λ‹¤.
- findAnnotation μ‚¬μ©

```kotlin
import kotlin.reflect.KProperty1
import kotlin.reflect.full.findAnnotation

private fun StringBuilder.serializeObject(obj: Any) {
    (obj::class as KClass<Any>) 
        .memberProperties
        .filter { it.findAnnotation<JsonExclude>() == null }
        .joinToStringBuilder(this, prefix = "{", postifx = "}") {
            serializeProperty(it, obj)
        }
}

private fun StringBuilder.serializeProperty(
  prop: KProperty1<Any, *>, obj: Any,
) {
    val jsonNameAnn = prop.findAnnotation<JsonName>()
    val propName = jsonNameAnn?.name ?: prop.name
    serializeString(propName)
    append(": ")
    serializePropertyValue(prop.get(obj))
}
```

- λ³€κ²½λ `serializeObject` ν•¨μ

```kotlin
import java.util.Date

data class Person(
    val name: String,
    @CustomSerializer(DateSerializer::class) val birthDate: Date
)

annotation class CustomSerializer {
	val serializerClass: KClass<out ValueSErializer<*>>
}
```

```kotlin
fun KProperty<*>.getSerializer(): ValueSerializer<Any?>? {
    val customSerializerAnn = findAnnotation<CustomSerializer>() ?: return null
    val serializerClass = customSerializerAnn.serializerClass
    val valueSerializer = serializerClass.objectInstance // object λ΅ Serializerλ¥Ό κµ¬ν„ν• κ²½μ° μΈμ¤ν„΄μ¤λ¥Ό μƒμ„±ν•  ν•„μ”κ°€ μ—†λ‹¤.
      ?: serializerClass.createInstance()
    @Suppress("UNCHECKED_CAST")
    return valueSerializer as ValueSerializer<Any?>
}
```

```kotlin
private fun StringBuilder.serializeProperty(
    prop: KProperty1<Any, *>, obj: Any,
) {
    val jsonNameAnn = prop.findAnnotation<JsonName>()
  val propName = jsonNameAnn?.name ?: prop.name
    serializeString(propName)
    append(": ")

    // μ»¤μ¤ν…€ μ§λ ¬ν™”κΈ° μ‚¬μ©
    val value = prop.get(obj)
    val jsonValue = prop.getSerializer()?.toJsonValue(value) // μ»¤μ¤ν…€ μ§λ ¬ν™”κΈ°κ°€ μμΌλ©΄ μ‚¬μ©
        ?: value
    serializePropertyValue(jsonValue)
}
```

- `@CustomSerializer`Β μ–΄λ…Έν…μ΄μ…μ΄ λ¶™μ€ ν”„λ΅νΌν‹°λ” μ§λ ¬ν™” μ‹ μ»¤μ¤ν…€ μ§λ ¬ν™” λ΅μ§μ„ μ‚¬μ©ν•΄μ•Ό ν•λ‹¤.
- getSerializerκ°€ μ£Όλ΅ ν”„λ΅νΌν‹°λ¥Ό λ‹¤λ£¨κΈ°μ— KPropertyμ ν™•μ¥ν•¨μλ΅ μ •μ
- findAnnotation μ‚¬μ©

### JSON νμ‹±κ³Ό κ°μ²΄ μ—­μ§λ ¬ν™”

```kotlin
inline fun <reified T: Any> deserialize(json: String): T
```

- μ—­μ§λ ¬ν™” μ‹ μ¬λ°”λ¥Έ κ²°κ³Όλ¥Ό λ§λ“¤μ–΄λ‚΄λ ¤λ©΄ μ‹¤ν–‰ μ‹μ μ— νƒ€μ… νλΌλ―Έν„°μ— μ ‘κ·Όν•΄μ•Ό ν•λ‹¤.
- μ΄λ” 11.2μ μ—μ„ μ‚΄ν΄λ³Έ κ²ƒμ²λΌ νƒ€μ… νλΌλ―Έν„°μ— reifiedλ¥Ό λ¶™μ—¬μ•Ό ν•λ‹¤λ” λ»μ΄κ³ , κ·Έλ΅ μΈν•΄ κ²°κµ­ ν•¨μλ¥Ό inlineμΌλ΅ μ„ μ–Έν•΄μ•Ό ν•λ‹¤.

```kotlin
data class Author(val name: String)
data class Book(val title: String, val author: Author)

fun main() {
    val json = """{"title": "book title", "author": {"name": "kevin"}}"""
    val book = deserialize<Book>(json)
    println(book)
    // Book(title=book title, author=Author(name=kevin))
}
```

- μ—­μ§λ ¬ν™”ν•  κ°μ²΄μ νƒ€μ…μ„ μ‹¤μ²΄ν™”ν• νƒ€μ… νλΌλ―Έν„°λ΅ deserialize ν•¨μμ— λ„κ²¨μ„ μƒλ΅μ΄ κ°μ²΄ μΈμ¤ν„΄μ¤λ¥Ό μ–»λ”λ‹¤.
- μ μ΄ν‚¤λ“μ JSON μ—­μ§λ ¬ν™”κΈ°λ” ν”ν μ“°λ” λ°©λ²•μ— λ”°λΌ 3λ‹¨κ³„λ΅ κµ¬ν„λΌ μλ‹¤.
    - μ–΄ν λ¶„μ„κΈ° (lexical analyzer), == λ ‰μ„ (lexer) : μ…λ ¥ λ¬Έμμ—΄μ„ ν† ν°μ λ¦¬μ¤νΈλ΅ λ³€ν™
        - λ¬Έμ ν† ν°: λ¬Έμλ¥Ό ν‘ν„, json λ¬Έλ²•μ—μ„ μ¤‘μ”ν• μλ―Έ
        - κ°’ ν† ν°: λ¬Έμμ—΄, μ, λ¶λ¦¬μ–Έ κ°’, null μƒμ
    - λ¬Έλ²• λ¶„μ„κΈ° (syntax analyzer) == νμ„ (parser) : ν† ν°μ λ¦¬μ¤νΈλ¥Ό κµ¬μ΅°ν™”λ ν‘ν„μΌλ΅ λ³€ν™
    - κ°μ²΄ μƒμ„±κΈ° : νμ‹±ν• κ²°κ³Όλ΅ κ°μ²΄λ¥Ό μƒμ„±ν•λ” μ»΄ν¬λ„νΈ

```kotlin
interface JsonObject {
    fun setSimpleProperty(propertyName: String, value: Any?)
    fun createObject(propertyName: String): JsonObject
    fun createArray(propertyName: String): JsonObject
}
```

- JsonObject μΈν„°νμ΄μ¤λ” ν„μ¬ μ—­μ§λ ¬ν™”ν•λ” μ¤‘μΈ κ°μ²΄λ‚ λ°°μ—΄μ„ μ¶”μ ν•λ‹¤.
- νμ„λ” ν„μ¬ κ°μ²΄μ μƒλ΅μ΄ ν”„λ΅νΌν‹°λ¥Ό λ°κ²¬ν•  λ•λ§λ‹¤ κ·Έ ν”„λ΅νΌν‹°μ— ν•΄λ‹Ήν•λ” JsonObjectμ ν•¨μλ¥Ό νΈμ¶ν•λ‹¤.

μ μ΄ν‚¤λ“ μ—­μ§λ ¬ν™”κΈ°λ” jsonμ„ μ½μΌλ©΄μ„ λ§λ“  ν”„λ΅νΌν‹° κ°μ²΄λ“¤μ„ μ €μ¥ν•΄ λ’€λ‹¤κ°€ λ‚μ¤‘μ— μƒμ„±μλ¥Ό νΈμ¶ν•  λ• μ¨μ•Ό ν•λ‹¤.

- λΉλ” ν¨ν„΄μ΄ μƒκ°λ‚μ§€λ§ λ―Έλ¦¬ μ •ν•΄μ§„ νƒ€μ…μ κ°μ²΄λ“¤μ„ λ§λ“¤κΈ° μ„ν• λ„κµ¬
- μ—­μ§λ ¬ν™”μ κ²½μ° ν•΄λ²•μ΄ μ™„μ „ν μ λ„¤λ¦­ν•΄μ•Ό ν•λ‹¤.
- λΉλ”λΌλ” μ©μ–΄ λ€μ‹  μ”¨μ•—μ„ μλ―Έν•λ” μ‹λ“λΌλ” λ‹¨μ–΄λ¥Ό μ‚¬μ©

## μ”μ•½

---

- μ½”ν‹€λ¦°μ—μ„ μ–΄λ…Έν…μ΄μ…μ„ μ μ©ν•  λ•λ” `MyAnnotation(params)` κµ¬λ¬Έμ„ μ‚¬μ©ν•λ‹¤.
- μ½”ν‹€λ¦°μ—μ„λ” νμΌκ³Ό μ‹ λ“± λ„“μ€ λ²”μ„μ νƒ€κΉƒμ— λ€ν•΄ μ–΄λ…Έν…μ΄μ…μ„ λ¶™μΌ μ μλ‹¤.
- μ–΄λ…Έν…μ΄μ… μΈμλ΅ κΈ°λ³Έ νƒ€μ… κ°’, λ¬Έμμ—΄, μ΄λ…, ν΄λμ¤ μ°Έμ΅°, λ‹¤λ¥Έ μ–΄λ…Έν…μ΄μ… ν΄λμ¤μ μΈμ¤ν„΄μ¤, λ°°μ—΄μ„ μ‚¬μ©ν•  μ μλ‹¤.
- `@get : JvmName`μ—μ„μ²λΌ μ–΄λ…Έν…μ΄μ…μ μ‚¬μ© μ§€μ  νƒ€κΉƒμ„ λ…μ‹ν•λ©΄ ν•λ‚μ μ½”ν‹€λ¦° μ„ μ–Έμ΄ μ—¬λ¬ κ°€μ§€ λ°”μ΄νΈμ½”λ“ μ”μ†λ¥Ό λ§λ“¤μ–΄λ‚΄λ” κ²½μ° μ •ν™•ν μ–΄λ–¤ λ¶€λ¶„μ— μ–΄λ…Έν…μ΄μ…μ„ μ μ©ν• μ§€ μ§€μ •ν•  μ μλ‹¤.
- μ–΄λ…Έν…μ΄μ… ν΄λμ¤λ¥Ό μ •μν•  λ•λ” `annotation class`λ΅ μ‹μ‘ν•λ‹¤.
    - μ΄ ν΄λμ¤λ” λ¨λ“  νλΌλ―Έν„°λ¥Ό `val` ν”„λ΅νΌν‹°λ΅ ν‘μ‹ν• μ£Ό μƒμ„±μκ°€ μμ–΄μ•Ό ν•κ³ , λ¶„λ¬Έμ€ μ—†μ–΄μ•Ό ν•λ‹¤.
- λ©”νƒ€μ–΄λ…Έν…μ΄μ…μ„ μ‚¬μ©ν•΄ νƒ€κΉƒ, μ–΄λ…Έν…μ΄μ… μ μ§€ λ¨λ“ λ“± μ—¬λ¬ μ–΄λ…Έν…μ΄μ… νΉμ„±μ„ μ§€μ •ν•  μ μλ‹¤.
- λ¦¬ν”λ ‰μ… APλ¥Ό ν†µν•΄ μ‹¤ν–‰ μ‹μ μ— κ°μ²΄μ λ©”μ„λ“μ™€ ν”„λ΅νΌν‹°λ¥Ό λ™μ μΌλ΅ μ—΄κ±°ν•κ³  μ ‘κ·Όν•  μ μλ‹¤.
    - λ¦¬ν”λ ‰μ… APμ—λ” ν΄λμ¤, ν•¨μ λ“± μ—¬λ¬ μΆ…λ¥μ μ„ μ–Έμ„ ν‘ν„ν•λ” μΈν„°νμ΄μ¤κ°€ λ“¤μ–΄μλ‹¤.
- ν΄λμ¤μ κ²½μ° `KClass` μΈμ¤ν„΄μ¤λ¥Ό μ–»κΈ° μ„ν•΄ `ClassName::class`λ¥Ό μ‚¬μ©ν•λ‹¤.
    - κ°μ²΄λ΅λ¶€ν„° KClass μΈμ¤ν„΄μ¤λ¥Ό μ–»μΌλ ¤λ©΄ `objName::class` λ¥Ό μ‚¬μ©ν•λ‹¤.
- `KFunction`κ³Ό `KProperty` μΈν„°νμ΄μ¤λ” λ¨λ‘ `KCallable`μ„ ν™•μ¥ν•λ‹¤.
    - KCallable μ€ μ λ„¤λ¦­ call λ©”μ„λ“λ¥Ό μ κ³µν•λ‹¤.
- `KCallable.callBy` λ©”μ„λ“λ¥Ό μ‚¬μ©ν•λ©΄ λ©”μ„λ“λ¥Ό νΈμ¶ν•λ©΄μ„ λ””ν΄νΈ νλΌλ―Έν„° κ°’μ„ μ‚¬μ©ν•  μ μλ‹¤.
- `KFunction0`, `KFunction1` λ“±μ μΈν„°νμ΄μ¤λ” λ¨λ‘ νλΌλ―Έν„° κ°μκ°€ λ‹¤λ¥Έ ν•¨μλ¥Ό ν‘ν„ν•λ©° `invoke` λ©”μ„λ“λ¥Ό μ‚¬μ©ν•΄ ν•¨μλ¥Ό νΈμ¶ν•  μ μλ‹¤.
- `KProperty0`, `KProperty1`μ€ μμ‹  κ°μ²΄μ κ°μκ°€ λ‹¤λ¥Έ ν”„λ΅νΌν‹°λ“¤μ„ ν‘ν„ν•λ©° κ°’ μ„ μ–»κΈ° μ„ν• get λ©”μ„λ“λ¥Ό μ§€μ›ν•λ‹¤.
    - `KMutableProperty0`κ³Ό `KMutableProperty1` μ€ κ°κ° `KProperty0`κ³Ό `KProperty1`μ„ ν™•μ¥ν•λ©° `set` λ©”μ„λ“λ¥Ό ν†µν•΄ ν”„λ΅νΌν‹° κ°’μ„ λ³€κ²½ν•  μ μλ‹¤.
- `KType`μ μ‹¤ν–‰ μ‹μ  ν‘ν„μ„ μ–»κΈ° μ„ν•΄ `typeOf<T>()` ν•¨μλ¥Ό μ‚¬μ©ν•λ‹¤.
